---
title: 什么是闭包？ 你如何/为何使用？
---

## 了解 JavaScript 闭包

在 JavaScript 中，闭包是一个捕获了它被声明的词法作用域的函数，允许它在外部作用域关闭后仍然访问和操作变量。

以下是闭包的工作原理：

1. **词法作用域**：JavaScript 使用词法作用域，这意味着函数对变量的访问是由它在源代码中的物理位置决定的。
1. **函数创建**：当一个函数被创建时，它会保持对它的词法作用域的引用。这个作用域包含在闭包被创建时处于范围内的所有局部变量。
1. **保持状态**：闭包通常用于以安全的方式维护状态，因为闭包捕获的变量在函数外部是不可访问的。

## ES6 语法和闭包

在 ES6 中，可以使用箭头函数来创建闭包，这提供了更简洁的语法并在词法上绑定了`this` 值。以下是一个例子：

```js
const createCounter = () => {
  let count = 0;
  return () => {
    count += 1;
    return count;
  };
};

const counter = createCounter();
console.log(counter()); // 输出: 1
console.log(counter()); // 输出: 2
```

为什么使用闭包？

1. **数据封装**：闭包提供了一种创建私有变量和函数的方式，外部无法访问。这对于隐藏实现细节和以封装的方式维护状态非常有用。
1. **函数式编程**：闭包在函数式编程范式中具有基础作用，它们用于创建可以传递和稍后调用的函数，保留了它们被创建的作用域的访问权限，例如[部分应用或柯里化](https://medium.com/javascript-scene/curry-or-partial-application-8150044c78b8#.l4b6l1i3x)。
1. **事件处理程序和回调函数**：在 JavaScript 中，闭包经常用于事件处理程序和回调函数中，以维护状态或访问在处理程序或回调函数定义时处于范围内的变量。
1. **模块模式**：闭包在 JavaScript 中启用了[模块模式](https://www.patterns.dev/vanilla/module-pattern)，允许创建具有私有和公共部分的模块。
